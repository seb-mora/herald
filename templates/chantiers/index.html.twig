{% extends 'admin/baseAdmin.html.twig' %}

{% block title %}Herald - Administration{% endblock %}

{% block body %}

<div class="max-w-5xl mx-auto items-stretch flex-column justify-center bg-white/70 h-[82%] ">
    <div class="justify-center pb-4 text-center">     
        <h1 class="text-4xl lg:text-5xl font-bold pt-10" >Chantiers</h1>
    </div>

    <a class="nav-link pl-16" href="{{ path('app_chantiers_new') }}">
        <button class="btn border-2 border-emerald-500 hover:bg-emerald-500 hover:font-bold hover:text-white duration-200">Cr√©er chantier</button>
    </a>

    <div class="  overflow-x-hidden h-[80%] lg:h-[78%] ml-[20px] pb-4">
        {% for chantier in chantiers %}
            <tr>
                <a href='{{ path('admin_chantiers_show', {'id': chantier.id}) }}'>
                    <div class=" bg-zinc-50 flex flex-row justify-between text-center rounded-xl drop-shadow-md hover:scale-105 hover:drop-shadow-2xl hover:transform-gpu hover:bg-white bgease-out duration-200 m-1 h-24 lg:h-16 mx-10 ">
                        {% if attribute(photos, chantier.id) is defined %}
                            <img src={{ photos[chantier.id] }} alt="Photo chantier" class="rounded-l-xl h-24 lg:h-16 w-24 lg:w-16 ">
                        {% else %}
                            <img src="{{ asset('img/noImage.jpg') }}" class="rounded-l-xl h-24 lg:h-16 w-24 lg:w-16">
                        {% endif %}
                        <div class=" md:basis-1/5 grow my-auto hidden md:block md:text-xl lg:text-base">{{ chantier.nom }}</div>
                        <div class="basis-1/5 md:basis-1/5 grow my-auto text-2xl md:text-xl lg:text-base">{{ chantier.localisation }}</div>
                        <div class="basis-1/5 md:basis-3/5 grow my-auto text-2xl md:text-xl lg:text-base">{{ chantier.description ? chantier.description|u.truncate(40, '...') : "Sans description" }}</div>
                        <div class="basis-1/5 md:basis-1/5 grow my-auto text-2xl md:text-xl lg:text-base">{{ chantier.dateDebut|date('d-m-Y')}}</div>
                    </div>
                </a>
            </tr>
        {% endfor %} 
     </div>

</div>

{% endblock %}
